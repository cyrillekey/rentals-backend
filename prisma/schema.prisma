// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id        Int             @id @default(autoincrement())
  email     String          @unique
  username  String
  phone     String
  avatar    Attachment?     @relation(fields: [avatarId], references: [id])
  avatarId  Int? @unique
  listings  Listings[]
  createdat DateTime        @default(now())
  updatedat DateTime        @updatedAt
  userRole UserRole 
  password String
  lastLogin DateTime
  address Address? @relation(fields:[addressId],references: [id])
  addressId Int? @unique
}

model Address {
  id        Int      @id @default(autoincrement())
  latitude  Float
  longitude Float
  address   String
  createdat DateTime @default(now())
  updatedat DateTime @updatedAt
  listings Listings[]
  users User?
}

model Listings {
  id        Int     @id @default(autoincrement())
  owner     User    @relation(fields: [id], references: [id])
  ownerId   Int
  address   Address @relation(fields: [addressId], references: [id])
  addressId Int
  images Attachment[] 
  category  ListingCategory
  sqfeet    Float
  ratings Ratings[]
}

model Attachment {
  id     Int    @id @default(autoincrement())
  userId Int? 
  User   User?
  listing Listings? @relation(fields: [listingId], references: [id])
  listingId Int?
}

model Transactions {
  id Int @id @default(autoincrement())
}

model Notification {
  id Int @id @default(autoincrement())
}

model Ratings {
  id     Int    @id @default(autoincrement())
  rating Float
  title  String
  review String
  listing Listings? @relation(fields: [listingId],references: [id])
  listingId Int?
}

enum ListingCategory {
  ONE_BEDROOM
  TWO_BEDROOM
  THREE_BEDROOM
  FOUR_BEDROOM
  FIVE_BEDROOM
  SINGLE_ROOM
  BEDSITTER
}

enum UserRole {
  CUSTOMER
  ADMIN
  AGENT
}
